/* --- æ˜­åæ”¿åŠ¡æ ·å¼è¡¨ v2.2 (å®«å»·å°‘å¥³é£) --- */

/* å…¨å±€å­—ä½“ä¸å˜é‡ */
#zhaohua-root {
    --zh-gold: #F4D03F;
    --zh-pink: #FFB7B2;
    --zh-pink-light: #FFDAC1;
    --zh-cream: #FFF9E6;
    --zh-blue-soft: #B5EAD7;
    --zh-text: #6D4C41;
    --zh-shadow: rgba(255, 183, 178, 0.4);
}

/* 1. æ‚¬æµ®æŒ‰é’® (å˜åœ†æ¶¦å¯çˆ±) */
#zhaohua-toggle-btn {
    position: fixed; top: 10px; right: 180px; z-index: 2147483647;
    width: 50px; height: 50px; display: flex; align-items: center; justify-content: center;
    font-size: 28px; cursor: pointer; user-select: none;
    background: linear-gradient(135deg, #FF9A9E 0%, #FECFEF 100%);
    border: 3px solid #FFF; border-radius: 50%;
    box-shadow: 0 4px 15px var(--zh-shadow);
    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    animation: floatBtn 3s ease-in-out infinite;
}
#zhaohua-toggle-btn:hover { transform: scale(1.15) rotate(10deg); }
@keyframes floatBtn { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }

/* 2. ä¸»çª—å£ä¸é®ç½© */
#zhaohua-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(255, 255, 255, 0.3); z-index: 2147483646;
    display: none; justify-content: center; align-items: center;
    backdrop-filter: blur(5px);
}

#zhaohua-panel {
    background-color: #FFF;
    background-image: radial-gradient(#FFDAC1 15%, transparent 16%), radial-gradient(#FFDAC1 15%, transparent 16%);
    background-size: 20px 20px;
    background-position: 0 0, 10px 10px;
    border: 5px solid var(--zh-pink-light);
    border-radius: 30px;
    width: 90%; max-width: 800px; height: 85vh;
    box-shadow: 0 15px 40px rgba(255, 154, 158, 0.3);
    font-family: 'Microsoft YaHei', 'Nunito', sans-serif;
    display: flex; flex-direction: column; overflow: hidden; position: relative;
}

/* æ ‡é¢˜æ  */
.zh-header {
    background: #FFF; padding: 12px 20px; display: flex; align-items: center;
    justify-content: space-between; border-bottom: 3px dotted var(--zh-pink);
    flex-shrink: 0; border-radius: 25px 25px 0 0;
}
.zh-title {
    font-weight: bold; color: #FF6F61; font-size: 1.3em; flex-grow: 1; text-align: center;
    text-shadow: 1px 1px 0 #FFF;
}

/* é¡¶éƒ¨æŒ‰é’®ç»„ */
.zh-toolbar-left, .zh-toolbar-right { display: flex; gap: 10px; align-items: center; }

.zh-icon-btn {
    background: #FFF; border: 2px solid var(--zh-pink-light); color: #FF8A80;
    border-radius: 15px; cursor: pointer; padding: 6px 12px; font-size: 1em;
    transition: all 0.2s; font-weight: bold;
}
.zh-icon-btn:hover { background: var(--zh-pink-light); color: #FFF; transform: translateY(-2px); }

.zh-btn-nav {
    background: #B5EAD7; color: #555; border: none; padding: 6px 15px;
    border-radius: 20px; cursor: pointer; font-size: 0.9em; font-weight: bold;
    display: none; /* é»˜è®¤éšè—ï¼ŒJSæ§åˆ¶ */
    box-shadow: 0 3px 0 #88D8B0; transition: all 0.1s;
}
.zh-btn-nav:active { transform: translateY(3px); box-shadow: none; }

.zh-exit-btn {
    background: #FF9A9E; color: #fff; border: none; padding: 6px 15px;
    border-radius: 20px; box-shadow: 0 3px 0 #FF6F61; cursor: pointer; font-weight: bold;
}
.zh-exit-btn:active { transform: translateY(3px); box-shadow: none; }

/* è§†å›¾å®¹å™¨ */
.zh-view { display: none; flex-direction: column; height: 100%; padding: 25px; overflow-y: auto; background: rgba(255,255,255,0.9); }
.zh-view.active { display: flex; }

/* æ¡ˆä»¶é€‰æ‹©å¡ç‰‡ */
.zh-loading-text { text-align: center; margin-top: 50px; color: #FF8A80; font-weight: bold; }
.zh-selection-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
.zh-select-card {
    background: #FFF; border: 2px solid var(--zh-pink-light); border-radius: 20px; padding: 20px;
    cursor: pointer; transition: all 0.2s; position: relative; overflow: hidden;
}
.zh-select-card::before {
    content: 'ğŸŒ¸'; position: absolute; top: -5px; right: -5px; font-size: 40px; opacity: 0.2;
}
.zh-select-card:hover { transform: translateY(-5px) scale(1.02); border-color: var(--zh-pink); box-shadow: 0 10px 20px rgba(255,183,178,0.3); }
.zh-card-title { color: #FF6F61; font-weight: bold; margin-bottom: 10px; font-size: 1.1em; }
.zh-card-preview { font-size: 0.9em; color: #888; line-height: 1.5; }

/* æ¡ˆä»¶è¯¦æƒ… */
.zh-detail-container { display: flex; flex-direction: column; height: 100%; gap: 15px; }
.zh-case-info {
    background: #FFF; padding: 20px; border-radius: 20px;
    border: 2px dashed var(--zh-gold); flex-shrink: 0;
}
.zh-case-title { margin: 0 0 10px 0; color: #FBC02D; font-size: 1.4em; display: flex; align-items: center; gap: 10px;}
.zh-advice-row { display: flex; gap: 15px; flex-shrink: 0; }
.zh-advice-box { flex: 1; padding: 15px; border-radius: 15px; font-size: 0.95em; position: relative; }
.zh-advice-lin { background: #E0F7FA; border: 2px solid #B2EBF2; color: #006064; }
.zh-advice-xiao { background: #FFEBEE; border: 2px solid #FFCDD2; color: #B71C1C; }

/* èŠå¤©è®°å½•åŒº (å¯çˆ±åŒ–) */
.zh-chat-log {
    flex-grow: 1; background: #FFF; border: 2px solid var(--zh-pink-light);
    border-radius: 15px; padding: 15px; overflow-y: auto; font-size: 0.95em; margin-bottom: 10px;
}
.zh-msg { margin-bottom: 12px; padding: 10px 15px; border-radius: 15px; max-width: 85%; position: relative; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
/* æ—è§‚ç šæ¶ˆæ¯ */
.zh-msg.lin { background: #E1F5FE; color: #0277BD; align-self: flex-start; border-bottom-left-radius: 2px; }
.zh-msg.lin::before { content: 'ğŸ‹'; position: absolute; left: -25px; bottom: 0; font-size: 20px; }
/* è§åˆ™ç‡ƒæ¶ˆæ¯ */
.zh-msg.xiao { background: #FFEBEE; color: #D84315; align-self: flex-start; border-bottom-left-radius: 2px; }
.zh-msg.xiao::before { content: 'ğŸ”¥'; position: absolute; left: -25px; bottom: 0; font-size: 20px; }
/* Useræ¶ˆæ¯ */
.zh-msg.user { background: #FFF3E0; color: #EF6C00; margin-left: auto; text-align: right; border-bottom-right-radius: 2px; }

/* åº•éƒ¨æ“ä½œåŒº */
.zh-action-area { display: flex; flex-direction: column; gap: 10px; flex-shrink: 0; }
.zh-chat-input-row { display: flex; gap: 10px; }
.zh-chat-input {
    flex: 1; padding: 10px; border: 2px solid #EEE; border-radius: 20px; outline: none; transition: border 0.2s;
}
.zh-chat-input:focus { border-color: var(--zh-pink); }
.zh-chat-send {
    background: #8D6E63; color: #fff; border: none; padding: 0 20px;
    border-radius: 20px; cursor: pointer; font-weight: bold;
}

.zh-decision-row { display: flex; gap: 10px; margin-top: 5px; }
.zh-btn { flex: 1; padding: 12px; border: none; border-radius: 25px; cursor: pointer; color: #fff; font-weight: bold; box-shadow: 0 4px 0 rgba(0,0,0,0.1); transition: transform 0.1s;}
.zh-btn:active { transform: translateY(4px); box-shadow: none; }
.btn-lin { background: #4FC3F7; } .btn-xiao { background: #FF8A65; } .btn-custom { background: #FDD835; color: #5D4037; }

/* å¼¹çª—é€šç”¨ */
.zh-modal-layer {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(255,255,255,0.8); display: none; justify-content: center; align-items: center; z-index: 100;
}
.zh-modal-box {
    background: #FFF; padding: 25px; border-radius: 20px; width: 80%; max-width: 500px;
    box-shadow: 0 10px 30px rgba(255, 183, 178, 0.5); border: 3px solid var(--zh-pink-light);
}
.zh-input-field { width: 100%; padding: 10px; border: 2px solid #EEE; border-radius: 10px; box-sizing: border-box; }
.zh-modal-footer { margin-top: 20px; text-align: right; }
